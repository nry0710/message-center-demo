<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DigiFinex消息中心 - APP版</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary-color: #673ab7;
            --primary-light: rgba(103, 58, 183, 0.1);
            --secondary-color: #ff5722;
            --text-primary: #333;
            --text-secondary: #666;
            --text-tertiary: #999;
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --border-color: #eee;
            --category-system: #3f51b5;
            --category-trade: #4caf50;
            --category-security: #f44336;
            --category-activity: #ff9800;
            --category-market: #2196f3;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 2px 6px rgba(0,0,0,0.12);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
        }
        
        body {
            background-color: #f4f5f9;
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 14px;
        }
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            background-color: var(--card-bg);
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }
        
        /* 頂部導航欄 */
        .header {
            background-color: var(--card-bg);
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .header-actions {
            display: flex;
            gap: 20px;
        }
        
        .icon-btn {
            background: none;
            border: none;
            font-size: 18px;
            color: var(--text-secondary);
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
        }
        
        .icon-btn:active {
            background-color: rgba(0,0,0,0.05);
        }
        
        /* 分類標籤欄 */
        .category-tabs {
            display: flex;
            overflow-x: auto;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--card-bg);
            position: sticky;
            top: 53px;
            z-index: 90;
            scrollbar-width: none;
        }
        
        .category-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .category-tab {
            padding: 12px 16px;
            white-space: nowrap;
            font-size: 14px;
            color: var(--text-secondary);
            position: relative;
            cursor: pointer;
        }
        
        .category-tab.active {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .category-tab.active:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 16px;
            right: 16px;
            height: 2px;
            background-color: var(--primary-color);
            border-radius: 3px;
        }
        
        .badge {
            background-color: var(--secondary-color);
            color: white;
            border-radius: 10px;
            padding: 0 6px;
            font-size: 12px;
            margin-left: 4px;
            min-width: 16px;
            text-align: center;
            display: inline-block;
        }
        
        /* 消息列表區域 */
        .message-list-container {
            padding: 8px 0;
            min-height: calc(100vh - 160px); /* 考慮底部導航 */
        }
        
        /* 消息日期分隔 */
        .date-divider {
            padding: 10px 16px;
            background-color: #f9f9fc;
            font-size: 13px;
            font-weight: 500;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
        }
        
        /* 消息項 */
        .message-item {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            position: relative;
            transition: background-color 0.2s;
        }
        
        .message-item:active {
            background-color: #f7f7f7;
        }
        
        .message-item.unread:before {
            content: '';
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--primary-color);
        }
        
        .message-icon {
            margin-right: 16px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #e6f7ff;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            overflow: hidden;
            font-size: 18px;
        }
        
        .system-message .message-icon {
            background-color: rgba(63, 81, 181, 0.1);
            color: var(--category-system);
        }
        
        .trade-message .message-icon {
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--category-trade);
        }
        
        .security-message .message-icon {
            background-color: rgba(244, 67, 54, 0.1);
            color: var(--category-security);
        }
        
        .activity-message .message-icon {
            background-color: rgba(255, 152, 0, 0.1);
            color: var(--category-activity);
        }
        
        .market-message .message-icon {
            background-color: rgba(33, 150, 243, 0.1);
            color: var(--category-market);
        }
        
        .message-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .message-title-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }
        
        .message-title {
            font-size: 16px;
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .message-time {
            font-size: 12px;
            color: var(--text-tertiary);
            white-space: nowrap;
            margin-left: 8px;
        }
        
        .message-preview {
            font-size: 14px;
            color: var(--text-secondary);
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            line-height: 1.4;
        }
        
        .message-item.unread .message-title,
        .message-item.unread .message-preview {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        /* 底部導航欄 */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--card-bg);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            border-top: 1px solid var(--border-color);
            z-index: 100;
            max-width: 480px;
            margin: 0 auto;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 0;
            color: var(--text-secondary);
            width: 20%;
            font-size: 12px;
        }
        
        .nav-item.active {
            color: var(--primary-color);
        }
        
        .nav-item i {
            font-size: 18px;
            margin-bottom: 4px;
        }
        
        /* 底部安全區域 */
        .safe-area-bottom {
            height: 65px;
        }
        
        /* 下拉刷新指示器 */
        .pull-refresh-hint {
            text-align: center;
            padding: 10px;
            color: var(--text-tertiary);
            font-size: 12px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        /* 加載更多指示器 */
        .load-more {
            text-align: center;
            padding: 16px;
            color: var(--text-tertiary);
            font-size: 14px;
        }
        
        /* 無消息提示 */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-tertiary);
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 16px;
            color: #ddd;
        }
        
        .empty-state-text {
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .empty-state-subtext {
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <!-- 頂部導航欄 -->
        <div class="header">
            <div class="header-title">
                <i class="fa-regular fa-bell"></i>
                消息中心
            </div>
            <div class="header-actions">
                <button class="icon-btn" id="mark-all-read">
                    <i class="fa-regular fa-envelope-open"></i>
                </button>
                <button class="icon-btn" id="settings-btn">
                    <i class="fa-solid fa-gear"></i>
                </button>
            </div>
        </div>
        
        <!-- 分類標籤欄 -->
        <div class="category-tabs">
            <div class="category-tab active" data-category="all">
                全部
                <span class="badge">50</span>
            </div>
            <div class="category-tab" data-category="system">
                系統通知
                <span class="badge">10</span>
            </div>
            <div class="category-tab" data-category="trade">
                交易相關
                <span class="badge">10</span>
            </div>
            <div class="category-tab" data-category="security">
                安全提醒
                <span class="badge">10</span>
            </div>
            <div class="category-tab" data-category="activity">
                活動公告
                <span class="badge">10</span>
            </div>
            <div class="category-tab" data-category="market">
                市場行情
                <span class="badge">10</span>
            </div>
        </div>
        
        <!-- 消息列表容器 -->
        <div class="message-list-container" id="messageList">
            <div class="pull-refresh-hint">
                <i class="fa-solid fa-arrow-down"></i>
                下拉刷新
            </div>
            
            <div class="date-divider">
                <i class="fa-regular fa-calendar"></i>
                今天
            </div>
            
            <!-- 系統通知類型消息 - 10條 -->
            <div class="message-item unread system-message" data-type="system" data-id="system-001">
                <div class="message-icon">
                    <i class="fa-solid fa-gear"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">系統維護通知</div>
                        <div class="message-time">15:30</div>
                    </div>
                    <div class="message-preview">尊敬的用戶：DigiFinex將於2025年4月25日凌晨2:00-4:00進行系統升級維護，期間將暫停所有服務。請提前做好資產調配，感謝您的理解與支持。</div>
                </div>
            </div>
            
            <div class="message-item unread system-message" data-type="system" data-id="system-002">
                <div class="message-icon">
                    <i class="fa-solid fa-arrows-rotate"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">系統更新通知</div>
                        <div class="message-time">09:30</div>
                    </div>
                    <div class="message-preview">DigiFinex平台已完成系統更新，全新交易介面現已上線！新版本帶來更流暢的交易體驗和更豐富的技術分析工具。</div>
                </div>
            </div>
            
            <div class="message-item unread system-message" data-type="system" data-id="system-003">
                <div class="message-icon">
                    <i class="fa-solid fa-wallet"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">充值到賬通知</div>
                        <div class="message-time">09:28</div>
                    </div>
                    <div class="message-preview">USDT充值成功，金額 5,000 USDT，網絡：TRC20，狀態：已到賬，交易ID：TRx7a2Z9bK4L5p8M3nQwR6sTuVy1X0zY</div>
                </div>
            </div>
            
            <div class="message-item system-message" data-type="system" data-id="system-004">
                <div class="message-icon">
                    <i class="fa-solid fa-wallet"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">提幣成功通知</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">ETH提幣成功，金額1.5 ETH，提幣地址：0x7D8c5F8a3b2E9B7E6a4BcA1F6a682E71EC98F72B，交易哈希：0x9b3a7fb2e8c4d5f6a7e1b0d2c3a4f5e6d7c8b9a0</div>
                </div>
            </div>
            
            <div class="message-item system-message" data-type="system" data-id="system-005">
                <div class="message-icon">
                    <i class="fa-solid fa-trophy"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">空投到賬</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">恭喜！您獲得了200 GRT代幣空投，價值約：260 USDT，獲得原因：持有相關NFT資格證明</div>
                </div>
            </div>
            
            <div class="message-item system-message" data-type="system" data-id="system-006">
                <div class="message-icon">
                    <i class="fa-solid fa-coins"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">手續費返還</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">根據您的VIP等級和交易量，系統已為您返還上週交易手續費45.68 USDT。感謝您對DigiFinex的支持！</div>
                </div>
            </div>
            
            <div class="message-item system-message" data-type="system" data-id="system-007">
                <div class="message-icon">
                    <i class="fa-solid fa-certificate"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">質押收益發放</div>
                        <div class="message-time">前天</div>
                    </div>
                    <div class="message-preview">您的Solana (SOL) 質押收益已發放至您的帳戶：0.32054795 SOL，收益計算期間：2025-04-10 至 2025-04-16</div>
                </div>
            </div>
            
            <div class="message-item system-message" data-type="system" data-id="system-008">
                <div class="message-icon">
                    <i class="fa-solid fa-gift"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">理財產品到期</div>
                        <div class="message-time">前天</div>
                    </div>
                    <div class="message-preview">您購買的USDT固定收益理財產品已到期。認購金額：10,000.00 USDT，實際收益：328.77 USDT，本金和收益已自動存入您的資金帳戶</div>
                </div>
            </div>
            
            <div class="message-item system-message" data-type="system" data-id="system-009">
                <div class="message-icon">
                    <i class="fa-solid fa-flag"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">平台活動結束</div>
                        <div class="message-time">4月20日</div>
                    </div>
                    <div class="message-preview">您參與的「交易大賽」活動已結束，您獲得第8名，獎勵1,000 USDT已發放至您的資金帳戶</div>
                </div>
            </div>
            
            <div class="message-item system-message" data-type="system" data-id="system-010">
                <div class="message-icon">
                    <i class="fa-solid fa-handshake"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">新功能發佈</div>
                        <div class="message-time">4月19日</div>
                    </div>
                    <div class="message-preview">DigiFinex新功能「小額資產轉換」現已上線！您可以一鍵將小額加密貨幣轉換為平台幣，有效整理您的資產</div>
                </div>
            </div>
            
            <div class="date-divider">
                <i class="fa-regular fa-calendar"></i>
                昨天
            </div>
            
            <!-- 交易相關類型消息 - 10條 -->
            <div class="message-item unread trade-message" data-type="trade" data-id="trade-001">
                <div class="message-icon">
                    <i class="fa-solid fa-coins"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">訂單成交通知</div>
                        <div class="message-time">09:15</div>
                    </div>
                    <div class="message-preview">您的BTC/USDT限價買入訂單已成交，價格：68,500.00 USDT，數量：0.15000000 BTC，總額：10,275.00 USDT</div>
                </div>
            </div>
            
            <div class="message-item unread trade-message" data-type="trade" data-id="trade-002">
                <div class="message-icon">
                    <i class="fa-solid fa-chart-line"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">掛單成功通知</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">您的ETH/USDT限價買入訂單已提交成功，價格：5,800.00 USDT，數量：3.00000000 ETH，總額：17,400.00 USDT</div>
                </div>
            </div>
            
            <div class="message-item unread trade-message" data-type="trade" data-id="trade-003">
                <div class="message-icon">
                    <i class="fa-solid fa-arrow-trend-up"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">止盈訂單觸發</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">您設置的止盈訂單已成功觸發並執行。交易對：ETH/USDT，觸發價格：6,200.00 USDT，實際成交價：6,205.50 USDT</div>
                </div>
            </div>
            
            <div class="message-item trade-message" data-type="trade" data-id="trade-004">
                <div class="message-icon">
                    <i class="fa-solid fa-arrow-trend-down"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">止損訂單觸發</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">您設置的止損訂單已觸發。交易對：SOL/USDT，觸發價格：120.00 USDT，實際成交價：119.50 USDT，數量：25 SOL</div>
                </div>
            </div>
            
            <div class="message-item trade-message" data-type="trade" data-id="trade-005">
                <div class="message-icon">
                    <i class="fa-solid fa-scale-balanced"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">杠桿交易通知</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">您已成功借入以下資產：借入幣種：USDT，借入金額：20,000.00，年化利率：7.3%，借入帳戶：現貨杠桿帳戶</div>
                </div>
            </div>
            
            <div class="message-item trade-message" data-type="trade" data-id="trade-006">
                <div class="message-icon">
                    <i class="fa-solid fa-money-bill-transfer"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">資金費率通知</div>
                        <div class="message-time">前天</div>
                    </div>
                    <div class="message-preview">BTC/USDT永續合約資金費率將於3小時後收取，當前費率：0.0185%，預計下一期費率：0.0112%</div>
                </div>
            </div>
            
            <div class="message-item trade-message" data-type="trade" data-id="trade-007">
                <div class="message-icon">
                    <i class="fa-solid fa-bell"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">價格提醒</div>
                        <div class="message-time">前天</div>
                    </div>
                    <div class="message-preview">您設置的價格提醒已觸發。幣種：BTC，當前價格：70,250.00 USDT，提醒條件：價格高於70,000.00 USDT</div>
                </div>
            </div>
            
            <div class="message-item trade-message" data-type="trade" data-id="trade-008">
                <div class="message-icon">
                    <i class="fa-solid fa-grid-2"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">網格交易報告</div>
                        <div class="message-time">4月20日</div>
                    </div>
                    <div class="message-preview">您的BTC/USDT網格交易機器人已運行7天，完成交易次數：48次，累計收益：358.65 USDT (2.39%)，年化收益率：約124.7%</div>
                </div>
            </div>
            
            <div class="message-item trade-message" data-type="trade" data-id="trade-009">
                <div class="message-icon">
                    <i class="fa-solid fa-exclamation-triangle"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">合約強制平倉通知</div>
                        <div class="message-time">4月19日</div>
                    </div>
                    <div class="message-preview">您的SOL/USDT永續合約因維持保證金不足已被系統強制平倉。倉位方向：多倉，杠桿倍數：20x，開倉價格：125.00 USDT</div>
                </div>
            </div>
            
            <div class="message-item trade-message" data-type="trade" data-id="trade-010">
                <div class="message-icon">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">槓桿調整提醒</div>
                        <div class="message-time">4月18日</div>
                    </div>
                    <div class="message-preview">您的ETH/USDT槓桿倉位風險率較高，當前價格接近清算價格。持倉數量：10.00000000 ETH，當前風險率：87%</div>
                </div>
            </div>
            
            <div class="date-divider">
                <i class="fa-regular fa-calendar"></i>
                4月18日
            </div>
            
            <!-- 安全提醒類型消息 - 10條 -->
            <div class="message-item unread security-message" data-type="security" data-id="security-001">
                <div class="message-icon">
                    <i class="fa-solid fa-shield-halved"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">登入安全提醒</div>
                        <div class="message-time">07:20</div>
                    </div>
                    <div class="message-preview">我們檢測到您的帳戶出現異常登入嘗試。時間：2025-04-20 07:18:42，IP：185.73.XX.XX，位置：烏克蘭，狀態：已阻止</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-002">
                <div class="message-icon">
                    <i class="fa-solid fa-key"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">密碼更新提醒</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">您的帳戶密碼已超過90天未更新。為了保障帳戶安全，建議定期更換登入密碼。上次更新時間：2025-01-18</div>
                </div>
            </div>
            
            <div class="message-item unread security-message" data-type="security" data-id="security-003">
                <div class="message-icon">
                    <i class="fa-solid fa-wallet"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">資金安全提醒</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">我們檢測到您帳戶有一筆大額資金轉出操作。幣種：BTC，數量：2.50000000，金額約當：171,250.00 USDT</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-004">
                <div class="message-icon">
                    <i class="fa-solid fa-laptop"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">新設備登入</div>
                        <div class="message-time">昨天</div>
                    </div>
                    <div class="message-preview">檢測到您的帳戶在新設備上登入。設備型號：iPhone 16 Pro，設備系統：iOS 19.2，IP位置：台北市</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-005">
                <div class="message-icon">
                    <i class="fa-solid fa-face-viewfinder"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">身份驗證升級</div>
                        <div class="message-time">前天</div>
                    </div>
                    <div class="message-preview">為進一步提升您的帳戶安全性，我們推出了面部識別登入功能。比傳統密碼更安全，防止釣魚網站風險</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-006">
                <div class="message-icon">
                    <i class="fa-solid fa-fingerprint"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">KYC認證成功</div>
                        <div class="message-time">前天</div>
                    </div>
                    <div class="message-preview">您的身份驗證已成功通過，現在您可以享受完整的交易功能和提高的提現額度。感謝您的配合！</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-007">
                <div class="message-icon">
                    <i class="fa-solid fa-lock"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">安全工具更新</div>
                        <div class="message-time">4月20日</div>
                    </div>
                    <div class="message-preview">Google即將於2025年4月25日為Google Authenticator應用推出重要更新。此更新將優化安全性，但可能需要重新設置兩步驗證</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-008">
                <div class="message-icon">
                    <i class="fa-solid fa-phishing"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">釣魚網站警告</div>
                        <div class="message-time">4月19日</div>
                    </div>
                    <div class="message-preview">我們近期發現多個仿冒DigiFinex官方網站的釣魚網站，這些網站意圖竊取用戶的登入憑證和資產</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-009">
                <div class="message-icon">
                    <i class="fa-solid fa-shield-virus"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">API密鑰被停用</div>
                        <div class="message-time">4月18日</div>
                    </div>
                    <div class="message-preview">由於安全原因，您的一個API密鑰已被系統自動停用。如果這不是您的操作，請立即聯絡客服</div>
                </div>
            </div>
            
            <div class="message-item security-message" data-type="security" data-id="security-010">
                <div class="message-icon">
                    <i class="fa-solid fa-right-to-bracket"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">登入IP變更</div>
                        <div class="message-time">4月17日</div>
                    </div>
                    <div class="message-preview">您的帳戶檢測到不同地區的登入IP。上次登入：台北市，本次登入：香港，時間差：4小時</div>
                </div>
            </div>
            
            <div class="date-divider">
                <i class="fa-regular fa-calendar"></i>
                4月15日
            </div>
            
            <!-- 市場行情類型消息 - 10條 -->
            <div class="message-item unread market-message" data-type="market" data-id="market-001">
                <div class="message-icon">
                    <i class="fa-solid fa-chart-pie"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">市場異動通知</div>
                        <div class="message-time">23:45</div>
                    </div>
                    <div class="message-preview">比特幣(BTC)價格在過去24小時內急劇攀升，突破75,000美元關口，創下歷史新高。</div>
                </div>
            </div>
            
            <div class="message-item unread market-message" data-type="market" data-id="market-002">
                <div class="message-icon">
                    <i class="fa-brands fa-ethereum"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">幣種關注</div>
                        <div class="message-time">18:22</div>
                    </div>
                    <div class="message-preview">以太坊(ETH)完成2.0最終階段升級，此次升級大幅提升TPS並降低Gas費用，價格短時上漲15%。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-003">
                <div class="message-icon">
                    <i class="fa-solid fa-gavel"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">監管動態</div>
                        <div class="message-time">4月15日</div>
                    </div>
                    <div class="message-preview">新加坡金融管理局(MAS)今日發佈新版加密貨幣監管框架，顯著放寬了對加密貨幣交易所和服務提供商的限制。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-004">
                <div class="message-icon">
                    <i class="fa-solid fa-chart-line"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">技術分析</div>
                        <div class="message-time">4月14日</div>
                    </div>
                    <div class="message-preview">SOL突破關鍵阻力位，短期目標價200美元。突破長期下降趨勢線，形成新的上升通道。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-005">
                <div class="message-icon">
                    <i class="fa-solid fa-newspaper"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">行業新聞</div>
                        <div class="message-time">4月14日</div>
                    </div>
                    <div class="message-preview">全球最大資產管理公司將推出加密貨幣投資產品，基金規模預計超過100億美元。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-006">
                <div class="message-icon">
                    <i class="fa-solid fa-code-branch"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">DeFi動態</div>
                        <div class="message-time">4月14日</div>
                    </div>
                    <div class="message-preview">去中心化金融(DeFi)市場迎來重大里程碑，借貸協議總鎖倉量(TVL)首次突破1000億美元。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-007">
                <div class="message-icon">
                    <i class="fa-solid fa-dog"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">幣種動態</div>
                        <div class="message-time">4月13日</div>
                    </div>
                    <div class="message-preview">柴犬幣(SHIB)團隊正式發布了生態系統擴展計劃Shibarium 2.0，SHIB價格24小時內上漲78%。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-008">
                <div class="message-icon">
                    <i class="fa-solid fa-images"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">NFT市場</div>
                        <div class="message-time">4月13日</div>
                    </div>
                    <div class="message-preview">藍籌NFT市場回暖，交易量三個月來首次突破10億美元，Bored Ape Yacht Club地板價上漲35%。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-009">
                <div class="message-icon">
                    <i class="fa-solid fa-landmark"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">宏觀經濟</div>
                        <div class="message-time">4月13日</div>
                    </div>
                    <div class="message-preview">美聯儲宣布降息25個基點，降至4.5%，為18個月來首次降息。此消息公布後，加密貨幣市場全線上漲。</div>
                </div>
            </div>
            
            <div class="message-item market-message" data-type="market" data-id="market-010">
                <div class="message-icon">
                    <i class="fa-solid fa-microchip"></i>
                </div>
                <div class="message-content">
                    <div class="message-title-row">
                        <div class="message-title">加密採礦</div>
                        <div class="message-time">4月12日</div>
                    </div>
                    <div class="message-preview">距離比特幣第四次減半事件僅剩18天，預計將於2025年5月1日左右發生。本次減半將使挖礦獎勵從6.25 BTC減少至3.125 BTC。</div>
                </div>
            </div>
            
            <div class="load-more">
                <i class="fa-solid fa-spinner fa-spin"></i>
                載入更多
            </div>
            
            <!-- 無消息時顯示的界面 -->
            <div class="empty-state" style="display: none;">
                <i class="fa-regular fa-bell-slash"></i>
                <div class="empty-state-text">暫無消息</div>
                <div class="empty-state-subtext">新消息將在這裡顯示</div>
            </div>
        </div>
        
        <!-- 底部安全區域 -->
        <div class="safe-area-bottom"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('App已初始化');
            
            // 獲取DOM元素
            const messageItems = document.querySelectorAll('.message-item');
            const categoryTabs = document.querySelectorAll('.category-tab');
            const markAllReadBtn = document.getElementById('mark-all-read');
            const settingsBtn = document.getElementById('settings-btn');
            const loadMoreBtn = document.querySelector('.load-more');
            
            // 底部導航切換
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    navItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    console.log('切換到: ' + this.querySelector('span').textContent);
                });
            });
            
            // 分類標籤切換
            categoryTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    categoryTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.getAttribute('data-category');
                    console.log('切換分類: ' + category);
                    
                    filterMessages(category);
                });
            });
            
            // 消息點擊事件
            messageItems.forEach(item => {
                item.addEventListener('click', function() {
                    const messageId = this.getAttribute('data-id');
                    const messageType = this.getAttribute('data-type');
                    
                    console.log(`點擊消息: ID=${messageId}, 類型=${messageType}`);
                    
                    // 標記為已讀
                    if(this.classList.contains('unread')) {
                        this.classList.remove('unread');
                        
                        // 更新對應分類的未讀數量
                        updateUnreadCount(messageType);
                        
                        // 這裡可以發送已讀狀態到服務器
                        console.log(`標記消息 ${messageId} 為已讀`);
                    }
                    
                    // 在此可以添加顯示消息詳情的邏輯
                    showMessageDetail(messageId, messageType);
                });
            });
            
            // 全部標記已讀按鈕
            markAllReadBtn.addEventListener('click', function() {
                const unreadMessages = document.querySelectorAll('.message-item.unread');
                const unreadCount = unreadMessages.length;
                
                if (unreadCount === 0) {
                    alert('沒有未讀消息');
                    return;
                }
                
                // 標記所有消息為已讀
                unreadMessages.forEach(message => {
                    message.classList.remove('unread');
                });
                
                // 更新所有分類的未讀數量
                updateAllUnreadCounts();
                
                // 顯示成功提示
                alert(`已將 ${unreadCount} 條消息標記為已讀`);
            });
            
            // 設置按鈕點擊
            settingsBtn.addEventListener('click', function() {
                console.log('打開設置');
                // 導航到設置頁面
                window.location.href = 'message_settings_app.html';
            });
            
            // 加載更多按鈕
            loadMoreBtn.addEventListener('click', function() {
                console.log('加載更多消息');
                // 模擬加載效果
                this.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> 加載中...';
                
                // 模擬延遲加載
                setTimeout(() => {
                    // 這裡可以添加實際的加載邏輯
                    this.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> 載入更多';
                    alert('沒有更多消息了');
                }, 1500);
            });
            
            // 下拉刷新功能
            let startY = 0;
            let refreshHint = document.querySelector('.pull-refresh-hint');
            let messageContainer = document.querySelector('.message-list-container');
            
            messageContainer.addEventListener('touchstart', function(e) {
                startY = e.touches[0].pageY;
                
                if (window.scrollY === 0) {
                    refreshHint.innerHTML = '<i class="fa-solid fa-arrow-down"></i> 下拉刷新';
                    refreshHint.style.padding = '10px';
                }
            });
            
            messageContainer.addEventListener('touchmove', function(e) {
                if (window.scrollY === 0) {
                    let moveY = e.touches[0].pageY;
                    let distance = moveY - startY;
                    
                    if (distance > 0) {
                        refreshHint.innerHTML = '<i class="fa-solid fa-arrow-down"></i> 下拉刷新';
                        
                        if (distance > 60) {
                            refreshHint.innerHTML = '<i class="fa-solid fa-arrow-up"></i> 釋放刷新';
                        }
                    }
                }
            });
            
            messageContainer.addEventListener('touchend', function(e) {
                if (window.scrollY === 0) {
                    let endY = e.changedTouches[0].pageY;
                    let distance = endY - startY;
                    
                    if (distance > 60) {
                        // 觸發刷新
                        refreshHint.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> 刷新中...';
                        
                        // 模擬刷新
                        setTimeout(() => {
                            refreshHint.innerHTML = '<i class="fa-solid fa-check"></i> 刷新成功';
                            
                            setTimeout(() => {
                                refreshHint.innerHTML = '<i class="fa-solid fa-arrow-down"></i> 下拉刷新';
                            }, 1000);
                        }, 1500);
                    }
                }
            });
            
            // 功能函數
            
            // 按分類過濾消息
            function filterMessages(category) {
                const allMessages = document.querySelectorAll('.message-item');
                const dateDividers = document.querySelectorAll('.date-divider');
                const emptyState = document.querySelector('.empty-state');
                
                // 首先隱藏所有日期分隔符
                dateDividers.forEach(divider => {
                    divider.style.display = 'none';
                });
                
                // 記錄可見的消息數量和日期
                let visibleCount = 0;
                let visibleDates = new Set();
                
                // 過濾消息
                allMessages.forEach(message => {
                    const messageType = message.getAttribute('data-type');
                    
                    if (category === 'all' || messageType === category) {
                        message.style.display = 'flex';
                        visibleCount++;
                        
                        // 記錄這個消息之前的日期分隔符
                        let prevElement = message.previousElementSibling;
                        while (prevElement) {
                            if (prevElement.classList.contains('date-divider')) {
                                visibleDates.add(prevElement);
                                break;
                            }
                            prevElement = prevElement.previousElementSibling;
                        }
                    } else {
                        message.style.display = 'none';
                    }
                });
                
                // 顯示相關的日期分隔符
                visibleDates.forEach(divider => {
                    divider.style.display = 'block';
                });
                
                // 顯示空狀態或加載更多按鈕
                if (visibleCount === 0) {
                    emptyState.style.display = 'block';
                    loadMoreBtn.style.display = 'none';
                } else {
                    emptyState.style.display = 'none';
                    loadMoreBtn.style.display = 'block';
                }
            }
            
            // 更新未讀數量
            function updateUnreadCount(messageType) {
                // 更新特定分類的未讀數量
                categoryTabs.forEach(tab => {
                    const category = tab.getAttribute('data-category');
                    const badge = tab.querySelector('.badge');
                    
                    if (category === messageType || category === 'all') {
                        let count = parseInt(badge.textContent) - 1;
                        if (count < 0) count = 0;
                        badge.textContent = count;
                        
                        if (count === 0) {
                            badge.style.display = 'none';
                        }
                    }
                });
            }
            
            // 更新所有未讀計數
            function updateAllUnreadCounts() {
                const categories = {
                    'all': 0,
                    'system': 0,
                    'trade': 0,
                    'security': 0,
                    'activity': 0,
                    'market': 0
                };
                
                // 重新計算未讀消息
                messageItems.forEach(item => {
                    if (item.classList.contains('unread')) {
                        const type = item.getAttribute('data-type');
                        categories[type]++;
                        categories['all']++;
                    }
                });
                
                // 更新每個分類的未讀數
                categoryTabs.forEach(tab => {
                    const category = tab.getAttribute('data-category');
                    const badge = tab.querySelector('.badge');
                    
                    badge.textContent = categories[category];
                    
                    if (categories[category] === 0) {
                        badge.style.display = 'none';
                    } else {
                        badge.style.display = 'inline-block';
                    }
                });
            }
            
            // 顯示消息詳情
            function showMessageDetail(messageId, messageType) {
                console.log(`查看消息詳情: ID=${messageId}, 類型=${messageType}`);
                // 跳轉到消息詳情頁
                window.location.href = `message_detail.html?id=${messageId}&type=${messageType}`;
            }
        });
    </script>
</body>
</html> 